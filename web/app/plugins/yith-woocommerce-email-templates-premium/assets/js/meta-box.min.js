jQuery(function(r){r(".yith-wcet-color-picker").wpColorPicker();var a=r("#yith-wcet-logo-url"),c=r("#yith-wcet-logo-image"),t=r("#yith-wcet-logo-and-del-container"),e=r("#yith-wcet-custom-logo-url").val(),i=r("#yith-wcet-remove-logo-btn"),o=r("#yith-wcet-logo-url-footer"),l=r("#yith-wcet-logo-image-footer"),n=r("#yith-wcet-logo-and-del-container-footer"),s=r("#yith-wcet-remove-logo-btn-footer"),h=r("#yith-wcet-custom-logo-btn-footer-add-himg"),d=r(".yith-wcet-custom-links-remove-btn"),w=parseInt(r("#yith-wcet-custom-links-count").data("custom-links-count")),f=r("#yith-wcet-custom-links-table"),u=r("#yith-wcet-custom-links-add-btn"),p=r("#yith-wcet-custom-link-row-default").html(),y=function(){d.on("click",function(){var t=r(this).attr("custom-link-index");r("#yith-wcet-custom-links-text"+t).val(""),r("#yith-wcet-custom-links-url"+t).val(""),r("#yith-wcet-custom-link-row"+t).hide()})},g=[[0,0,"#769ed2","#e0e7f0","transparent","#656565",1,"#e0e7f0",1],[2,17,"#6dcbbb","#65707a","#6dcbbb","#656565",2,"#6dcbbb",0],[2,0,"#ee6563","#ffffff","transparent","#ffffff",1,"#e0e7f0",1]],m=[[36,48,36,48],[36,48,36,48],[25,20,25,20],[25,25,25,25]],v=["#ffffff","#ffffff","#444444","#444444"],b=r("#yith-wcet-price-title-bg-color"),k=r("#yith-wcet-premium-mail-style"),_=r("#yith-wcet-header-position"),x=r("#yith-wcet-page-width"),I=r("#yith-wcet-page-border-radius"),j=r("#yith-wcet-base-color"),z=r("#yith-wcet-body-color"),D=r("#yith-wcet-bg-color"),N=r("#yith-wcet-txt-color"),S=r("#yith-wcet-header-color"),E=r("#yith-wcet-footer-text-color"),O=r("#yith-wcet-h1-size"),X=r("#yith-wcet-h2-size"),C=r("#yith-wcet-h3-size"),J=r("#yith-wcet-body-size"),P=r("#yith-wcet-table-border-width"),U=r("#yith-wcet-table-border-color"),A=r("#yith-wcet-table-bg-color"),B=r("#yith-wcet-socials-on-header"),Q=r("#yith-wcet-socials-on-footer"),T=r("#yith-wcet-socials-color"),V=r("#yith-wcet-image-preview-template");r("#yith-wcet-upload-btn").on("click",function(t){t.preventDefault();var i=wp.media({title:"Upload Image",multiple:!1}).open().on("select",function(t){var e=i.state().get("selection").first().toJSON().url;a.val(e),c.attr("src",e),c.show()})}),r("#yith-wcet-custom-logo-btn").on("click",function(t){a.val(e),0<e.length&&(c.attr("src",e),c.show())}),t.on("mouseover",function(t){i.show()}),t.on("mouseout",function(t){i.hide()}),i.on("click",function(){a.val(""),c.attr("src",""),c.hide()}),r("#yith-wcet-upload-btn-footer").on("click",function(t){t.preventDefault();var i=wp.media({title:"Upload Image",multiple:!1}).open().on("select",function(t){var e=i.state().get("selection").first().toJSON().url;o.val(e),l.attr("src",e),l.show()})}),r("#yith-wcet-custom-logo-btn-footer").on("click",function(t){o.val(e),0<e.length&&(l.attr("src",e),l.show())}),n.on("mouseover",function(t){s.show()}),n.on("mouseout",function(t){s.hide()}),s.on("click",function(){o.val(""),l.attr("src",""),l.hide()}),h.on("click",function(){o.val(a.val()),0<a.val().length?(l.attr("src",a.val()),l.show()):(l.attr("src",""),l.hide())}),y(),u.on("click",function(){var t='<tr id="yith-wcet-custom-link-row'+ ++w+'">';t+=p.replace(/INDEX/g,w),t+="</tr>",f.append(t),d=r(".yith-wcet-custom-links-remove-btn"),y()}),k.on("change",function(){var t,e="default"==r(this).val()?1:parseInt(r(this).val())+1,i=yith_wcet_meta_box.assets_url+"/images/preview-emails/template-"+e+".png";V.attr("src",i),"default"!=r(this).val()?(t=parseInt(r(this).val()-1),_.prop("selectedIndex",g[t][0]),x.val(600),I.val(g[t][1]),j.val(g[t][2]),j.trigger("change"),z.val("#ffffff"),z.trigger("change"),D.val(g[t][3]),D.trigger("change"),N.val("#656565"),N.trigger("change"),S.val(g[t][4]),S.trigger("change"),E.val(g[t][5]),E.trigger("change"),O.val(25),X.val(14),C.val(13),J.val(12),P.val(g[t][6]),U.val(g[t][7]),U.trigger("change"),A.val("#ffffff"),A.trigger("change"),A.val("transparent"),B.prop("checked","checked"),Q.prop("checked","checked"),T.prop("selectedIndex",g[t][8]),r("#yith-wcet-header-padding-top").val(m[t+1][0]),r("#yith-wcet-header-padding-right").val(m[t+1][1]),r("#yith-wcet-header-padding-bottom").val(m[t+1][2]),r("#yith-wcet-header-padding-left").val(m[t+1][3]),b.val(v[t+1])):(r("#yith-wcet-header-padding-top").val(m[0][0]),r("#yith-wcet-header-padding-right").val(m[0][1]),r("#yith-wcet-header-padding-bottom").val(m[0][2]),r("#yith-wcet-header-padding-left").val(m[0][3]),b.val(v[0])),b.trigger("change")});var q={message:null,overlayCSS:{background:"#000",opacity:.6},ignoreIfBlocked:!0};r(".yith-wcet-test-email-wrapper").on("click",".yith-wcet-test-email-send",function(t){var e,i=r(t.target).closest(".yith-wcet-test-email-send"),a=i.closest(".yith-wcet-test-email-wrapper"),c=a.find(".yith-wcet-test-email-recipient").first(),o=a.find(".yith-wcet-test-email-message").first(),l=c.val(),n=a.data("template_id");0<l.length&&n&&(i.block(q),e={preview:1,template_id:n,send_to:l,action:"yith_wcet_send_test_email"},r.ajax({type:"POST",data:e,url:ajaxurl,success:function(t){"undefined"!=typeof t.error?o.html('<span class="error">'+t.error+"</span>"):"undefined"!=typeof t.message&&o.html('<span class="message">'+t.message+"</span>"),o.find("span").delay(3e3).fadeOut()},complete:function(){i.unblock()}}))});var F=wp.codeEditor.initialize("yith-wcet-additional-css",{type:"text/css"}),G=r("#yith-wcet-additional-css");r("#yith-wcet-preview-email-btn").on("click",function(){G.val(F.codemirror.getValue()).trigger("change");var t,e,i={ajax:!0,url:ajaxurl,responsive_controls:!0,ajax_data:r.extend({action:"yith_wcet_email_preview",yith_wcet_preview_mail:"1",template_id:"ajax_preview"},(t={},e=r('[name^="_template_meta"]:not(#yith-wcet-custom-links-textINDEX):not(#yith-wcet-custom-links-urlINDEX)').serializeArray(),r.each(e,function(){t[this.name]?(t[this.name].push||(t[this.name]=[t[this.name]]),t[this.name].push(this.value||"")):t[this.name]=this.value||""}),t))};r.fn.yith_wcet_popup(i)})});